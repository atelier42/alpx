/*!
 * wp-color-picker-alpha
 *
 * Overwrite Automattic Iris for enabled Alpha Channel in wpColorPicker
 * Only run in input and is defined data alpha in true
 *
 * Version: 2.0.2
 * https://github.com/kallookoo/wp-color-picker-alpha
 * Licensed under the GPLv2 license.
 *
 * Customized and fixed by Elementor & WebshopWorks team
 */
(function(c){Color.fn.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";6>a.length&&(a=("00000"+a).substr(-6));return"#"+a};c.widget("wp.wpColorPicker",c.wp.wpColorPicker,{_create:function(){if(c.support.iris){var a=this,b=a.element;c.extend(a.options,b.data());if("hue"===a.options.type)return a._createHueOnly();a.close=c.proxy(a.close,a);a.initialValue=b.val();b.addClass("wp-color-picker");
b.parent("label").length||(b.wrap("<label></label>"),a.wrappingLabelText=c('<span class="screen-reader-text"></span>').insertBefore(b).text(wpColorPickerL10n.defaultLabel));a.wrappingLabel=b.parent();a.wrappingLabel.wrap('<div class="wp-picker-container" />');a.wrap=a.wrappingLabel.parent();a.toggler=c('<button type="button" class="button wp-color-result" aria-expanded="false"><span class="wp-color-result-text"></span></button>').insertBefore(a.wrappingLabel);a.toggler.find(".wp-color-result-text").text(wpColorPickerL10n.pick);
a.pickerContainer=c('<div class="wp-picker-holder" />').insertAfter(a.wrappingLabel);a.button=c('<input type="button" class="button button-small" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString).attr("aria-label",wpColorPickerL10n.defaultAriaLabel):a.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear).attr("aria-label",wpColorPickerL10n.clearAriaLabel);a.wrappingLabel.wrap('<span class="wp-picker-input-wrap hidden" />').after(a.button);
a.inputWrapper=b.closest(".wp-picker-input-wrap");a.toggler.css({padding:0});a.toggler.find(".wp-color-result-text").hide();var d=function(f){a.options.alpha?(a.toggler.css({"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==)",
position:"relative"}),a.toggler.find("span.color-alpha").length||a.toggler.append('<span class="color-alpha" />'),a.toggler.find("span.color-alpha").css({backgroundColor:f})):a.toggler.css({backgroundColor:f})};b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,change:function(f,e){d(e.color);c.isFunction(a.options.change)&&a.options.change.call(this,f,e)}});b.val(a.initialValue);d(a.initialValue);a._addListeners();a.options.hide||
a.toggler.click()}},open:function(){this.element.iris("toggle");this.inputWrapper.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open").attr("aria-expanded","true");c("body").on("click.wpcolorpicker",this.close)},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(b){c(".wp-picker-active").each(function(){this!==b.currentTarget&&c(".wp-color-picker",this).wpColorPicker("close")});b.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?
a.close():a.open()});a.element.on("change",function(b){if(""===c(this).val()||a.element.hasClass("iris-error"))a.options.alpha?a.toggler.find("span.color-alpha").css("backgroundColor",""):a.toggler.css("backgroundColor",""),c.isFunction(a.options.clear)&&a.options.clear.call(this,b)});a.button.on("click",function(b){c(this).hasClass("wp-picker-clear")?(a.element.val(""),a.options.alpha?a.toggler.find("span.color-alpha").css("backgroundColor",""):a.toggler.css("backgroundColor",""),c.isFunction(a.options.clear)&&
a.options.clear.call(this,b)):c(this).hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})}});c.widget("a8c.iris",c.a8c.iris,{_create:function(){this._super();this.options.alpha=this.element.data("alpha")||!1;this.element.is(":input")||(this.options.alpha=!1);if("undefined"!==typeof this.options.alpha&&this.options.alpha){var a=this,b=a.element,d=c('<div class="iris-strip iris-slider iris-alpha-slider"><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>').appendTo(a.picker.find(".iris-picker-inner")),
f=d.find(".iris-slider-offset-alpha");d={aContainer:d,aSlider:f};"undefined"!==typeof b.data("custom-width")?a.options.customWidth=parseInt(b.data("custom-width"))||0:a.options.customWidth=100;a.options.defaultWidth=b.width();1>a._color._alpha||a._color.toString().indexOf("rgb");b.width(parseInt(a.options.defaultWidth+a.options.customWidth));c.each(d,function(k,h){a.controls[k]=h});a.controls.square.css({"margin-right":"0"});b=a.picker.width()-a.controls.square.width()-20;var e=b/6,g=b/2-e;c.each(["aContainer",
"strip"],function(k,h){a.controls[h].width(g).css({"margin-left":e+"px"})});a.setAlphaSliderBackground();a._initControls()}},_initControls:function(){this._super();if(this.options.alpha){var a=this;a.controls.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*a._color._alpha),slide:function(b,d){a._color._alpha=parseFloat(d.value/100);a._change.apply(a,arguments)}})}},_change:function(){this._super();var a=this,b=a.element;if(a.options.alpha){var d=a.controls,f=parseInt(100*
a._color._alpha),e=a.picker.closest(".wp-picker-container").find(".wp-color-result");a.setAlphaSliderBackground();e.hasClass("wp-picker-open")&&(d.aSlider.slider("value",f),1>a._color._alpha&&d.strip.attr("style",d.strip.attr("style").replace(/rgba\(([0-9]+,)(\s+)?([0-9]+,)(\s+)?([0-9]+)(,(\s+)?[0-9\.]+)\)/g,"rgb($1$3$5)")))}if(b.data("reset-alpha"))a.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){a._color._alpha=1;a.active="external";a._change()})},_addInputListeners:function(a){var b=
this,d=function(f){var e=new Color(a.val()),g=a.val();a.removeClass("iris-error");e.error?""!==g&&a.addClass("iris-error"):e.toString()!==b._color.toString()&&("keyup"===f.type&&g.match(/^[0-9a-fA-F]{3}$/)||b._setOption("color",e.toString()))};a.on("change",d).on("keyup",b._debounce(d,100));if(b.options.hide)a.on("focus",function(){b.show()})},setAlphaSliderBackground:function(){var a=this._color.toRgb();this.controls.aContainer.css({background:"linear-gradient(to bottom, "+["rgb("+a.r+","+a.g+","+
a.b+") 0%","rgba("+a.r+","+a.g+","+a.b+", 0) 100%"].join(", ")+"), url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==)"})}})})(jQuery);